{% extends 'website/base.html' %}
{% load markdownify admin_urls lessontags static %}

{% block extra_head_material %}
  <link rel="stylesheet" href="{% static 'lesson/css/pygment.css' %}">
  <link rel="stylesheet" href="{% static 'website/css/github.css' %}">
  <script>
    var next = {% if page_obj.has_next %}{{ page_obj.next_page_number }}{% else %}0{% endif %}
    var prev = {% if page_obj.has_previous %}{{ page_obj.previous_page_number }}{% else %}0{% endif %}
  </script>
{% endblock extra_head_material %}

{% block header %}
  {% include 'workshop/workshop-wide-elements/navbar.html' %}
{% endblock %}

{% block hero %}
{% endblock %}

{% block admin_edit %}
  <a target="_blank" href="/admin" class="text-decoration-none">
      <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-menu-app-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" d="M0 1.5A1.5 1.5 0 0 1 1.5 0h2A1.5 1.5 0 0 1 5 1.5v2A1.5 1.5 0 0 1 3.5 5h-2A1.5 1.5 0 0 1 0 3.5v-2zM14 7H2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1zM2 6a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H2z"/>
      <path fill-rule="evenodd" d="M15 11H1v-1h14v1zM2 12.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
    </svg><span class="ml-1 mr-4">Django admin</span>
  </a>

  <a href="{% url 'admin:lesson_lesson_change' lesson.id  %}" class="text-decoration-none">
    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pen" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" d="M5.707 13.707a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391L10.086 2.5a2 2 0 0 1 2.828 0l.586.586a2 2 0 0 1 0 2.828l-7.793 7.793zM3 11l7.793-7.793a1 1 0 0 1 1.414 0l.586.586a1 1 0 0 1 0 1.414L5 13l-3 1 1-3z"/>
      <path fill-rule="evenodd" d="M9.854 2.56a.5.5 0 0 0-.708 0L5.854 5.855a.5.5 0 0 1-.708-.708L8.44 1.854a1.5 1.5 0 0 1 2.122 0l.293.292a.5.5 0 0 1-.707.708l-.293-.293z"/>
      <path d="M13.293 1.207a1 1 0 0 1 1.414 0l.03.03a1 1 0 0 1 .03 1.383L13.5 4 12 2.5l1.293-1.293z"/>
    </svg><span class="ml-1 mr-4">Edit lesson</span>
  </a>

  <a target="_blank" href="https://www.github.com/{{ workshop.parent_repo }}/blob/{{ workshop.parent_branch }}/lessons.md" class="text-decoration-none">
    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-code" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 1h5v1H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V6h1v7a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/>
      <path d="M9 4.5V1l5 5h-3.5A1.5 1.5 0 0 1 9 4.5z"/>
      <path fill-rule="evenodd" d="M8.646 6.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708-.708L10.293 9 8.646 7.354a.5.5 0 0 1 0-.708zm-1.292 0a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L5.707 9l1.647-1.646a.5.5 0 0 0 0-.708z"/>
    </svg><span class="ml-1">See on GitHub</span>
  </a>
{% endblock %}

{% block main %}
  {% include 'lesson/lesson-elements/next-prev.html' %}

  <div class="row">

    <div class="markdown-body col-12 py-3" id="lesson-content">

      <h1>{{ lesson.order }}. {{ lesson.title }}</h1>

      <div class="lesson-text py-3">
        {{ lesson.text | markdown | safe }}

        {% if lesson.challenge %}
          <h3 class="pt-4">Challenge{% if lesson.challenge.title %}: {{ lesson.challenge.title }}{% endif %}</h3>
          {{ lesson.challenge.text | markdown | safe }}

          {% if lesson.challenge.solution %}
            <p>
              <button class="btn btn-warning" type="button" data-toggle="collapse" data-target="#solution" aria-expanded="false" aria-controls="solution">
                Show solution
              </button>
            </p>
            <div class="collapse" id="solution">
              <div class="card card-body">
                {{ lesson.challenge.solution.text | markdown | safe }}
                <p>Were you <button class="btn btn-success">right</button> or <button class="btn btn-danger">wrong</button>â€”let us know!</p>
              </div>
            </div>
          {% endif %}
        {% endif %}

        <div class="lesson-feedback py-2 border-top">
          <span class="text-muted">
            <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-exclamation" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
              <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
            </svg>
          </span>
          <a class="text-muted small text-decoration-none" href="{% url "feedback:lesson_popup" lesson.id %}?close=true"
          onclick="window.open('{% url "feedback:lesson_popup" lesson.id %}?close=true','popup','width=600,height=600'); return false;">
            Report a problem with this lesson.
          </a>
        </div>

      </div>
    </div>

  </div>

  {% include 'lesson/lesson-elements/pagination.html' %}
  {% include 'lesson/lesson-elements/progress.html' %}

{% endblock %}




{% block javascript %}
<script src="{% static 'lesson/js/zen.js' %}" crossorigin="anonymous"></script>
<script src="{% static 'lesson/js/swipe.js' %}" crossorigin="anonymous"></script>
<script src="{% static 'workshop/js/navbar.js' %}" crossorigin="anonymous"></script>
<!--
  <script src="{% static 'website/js/velocity.min.js' %}" crossorigin="anonymous"></script>
  <script src="{% static 'website/js/velocity.ui.js' %}" crossorigin="anonymous"></script>
-->
<script src="//cdn.jsdelivr.net/npm/velocity-animate@2.0/velocity.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/velocity-animate@2.0/velocity.ui.min.js"></script>
{% endblock %}